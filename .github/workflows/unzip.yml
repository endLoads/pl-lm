name: Select and Unzip Files

on:
  workflow_dispatch:  # Позволяет ручной запуск
    inputs:
      selected_files:
        description: "Введите через запятую ZIP-файлы для распаковки (например: file1.zip, file2.zip)"
        required: true

jobs:
  list_and_unzip:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v3

    - name: Install unzip Utility
      run: sudo apt-get install -y unzip

    - name: Show Available ZIP Files
      run: |
        echo "Найденные ZIP-файлы в репозитории:"
        find . -name "*.zip"  # Ищет все ZIP-файлы в репозитории

    - name: Unzip Selected Files
      run: |
        IFS=',' read -r -a files <<< "${{ github.event.inputs.selected_files }}"
        for file in "${files[@]}"; do
          if [ -f "$file" ]; then
            unzip "$file" -d "$(dirname "$file")"
            echo "Unzipped: $file"
          else
            echo "Файл не найден: $file"
          fi
        done
